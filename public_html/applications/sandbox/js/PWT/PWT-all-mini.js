Object.extend=function(a,e){if(Object.isAssocArray(e)){if(a==null||Object.isUndefined(a)){a={};}for(var d in e){if(Object.isAssocArray(e)){if(Object.isUndefined(a[d])||a[d]==null||a[d]==false){a[d]={};}a[d]=Object.extend(a[d],e[d]);}else{if(Object.isArray(e[d])){a[d]=Object.extend(a[d],e[d]);}else{a[d]=e[d];}}}}else{if(Object.isArray(e)){if(!Object.isArray(a)){a=[];}for(var c=0,b=e.length;c<b;c++){a[c]=Object.extend(a[c],e[c]);}}else{a=e;}}return a;};Object.clone=function(a){var b={};b=Object.extend(b,a);return b;};Object.isUndefined=function(a){return typeof a=="undefined";};Object.isDefined=function(a){return typeof a!="undefined";};Object.isFunction=function(a){return typeof a=="function";};Object.isString=function(a){return typeof a=="string";};Object.isNumber=function(a){return typeof a=="number";};Object.isElement=function(a){return a&&a.nodeType==1;};Object.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]";};Object.isDate=function(a){return Object.prototype.toString.call(a)==="[object Date]";};Object.isNull=function(a){return a===null;};Object.isAssocArray=function(a){return(!Object.isArray(a)&&!Object.isBoolean(a)&&!Object.isElement(a)&&!Object.isFunction(a)&&!Object.isNumber(a)&&!Object.isString(a)&&!Object.isUndefined(a)&&a!=null);};Object.isBoolean=function(a){return typeof a=="boolean";};Object.isEmpty=function(b,a){if(!b||Object.isUndefined(b)||Object.isNull(b)||(Object.isArray(b)&&b.length===0)||(Object.isString(b)&&(b.trim()===""||b==="0"))||(Object.isNumber(b&&b===0))){return true;}else{if(a&&/^(\t*)|(\v*)|(\s*)$/.test(b)){return true;}}return false;};Object.toQueryString=function(a){if(this.isString(a)){return a;}var c="";for(var b in a){if(!this.isFunction(a[b])&&typeof a[b]!="object"){c+=encodeURIComponent(b)+"="+encodeURIComponent(a[b])+"&";}}return c;};var $break={};Object.extend(Array.prototype,{_each:function(b){for(var a=0,c=this.length;a<c;a++){b(this[a]);}},each:function(b){var a=0;try{this._each(function(d){b(d,a++);});}catch(c){if(c!=$break){throw c;}}return this;},find:function(b){var a;this.each(function(d,c){if(b(d,c)){a=d;throw $break;}});return a;},findAll:function(b){var a=[];this.each(function(d,c){if(b(d,c)){a.push(d);}});return a;},first:function(){return this[0];},last:function(){return this[this.length-1];},inArray:function(a){return(this.find(function(b){return(a==b)?true:false;})!=undefined)?true:false;},without:function(){if(Object.isArray(arguments[0])){var a=$A(arguments[0]);return this.findAll(function(b){return !a.include(b);});}else{var a=$A(arguments);return this.findAll(function(b){return !a.include(b);});}}});Object.extend(Element.prototype,{insert:function(e,d){var h={TABLE:["<table>","</table>",1],TBODY:["<table><tbody>","</tbody></table>",2],TR:["<table><tbody><tr>","</tr></tbody></table>",3],TD:["<table><tbody><tr><td>","</td></tr></tbody></table>",4],SELECT:["<select>","</select>",1]};if(Object.isUndefined(d)){d="bottom";}d=d.toLowerCase();if(!["before","after","top","bottom"].inArray(d)){d="bottom";}var f=function(){};switch(d){case"before":f=function(l,m){l.parentNode.insertBefore(m,l);};break;case"after":f=function(l,m){l.parentNode.insertBefore(m,l.nextSibling);};break;case"top":f=function(l,m){l.insertBefore(m,l.firstChild);};break;case"bottom":f=function(l,m){l.appendChild(m);};break;}if(Object.isElement(e)){f(this,e);return;}var b=((d=="before"||d=="after")?this.parentNode:this).tagName.toUpperCase();var c=document.createElement("div");var k=h[b];if(k){c.innerHTML=k[0]+e+k[1];var a=function(){c=c.firstChild;};for(i=0;i<t[2];i++){a();}}else{c.innerHTML=e;}var g=$A(c.childNodes);delete c;if(d=="top"||d=="after"){g.reverse();}g.each(f.curry(this));return this;},update:function(a){if(Object.isElement(a)){$A(this.childNodes).each(function(b){this.removeChild(b);}.bind(this));this.appendChild(a);}else{this.innerHTML=a;}return this;},replace:function(a){$return=this.parentNode;if(Object.isElement(a)){this.parentNode.replaceChild(a,this);}else{this.parentNode.innerHTML=a;}return $return;},remove:function(){$return=this.parentNode;try{$return.removeChild(this);}catch(a){}return $return;},show:function(){this.style.display="";return this;},hide:function(){this.style.display="none";return this;},hasClassName:function(a){return this.className.split(" ").inArray(a);},addClassName:function(a){if(!this.hasClassName(a)){this.className+=" "+a;}return this;},removeClassName:function(a){var b=[];this.className.split(" ").each(function(c){if(c!=a){b.push(c);}});this.className=b.join(" ");return this;},toggleClassName:function(a){if(this.hasClassName(a)){this.removeClassName(a);}else{this.addClassName(a);}},swapClassNames:function(b,a){return this.removeClassName(b).addClassName(a);},select:function(a){return this.querySelector(a);},selectAll:function(b,a){if(a){if(Object.isFunction(this.querySelectorAll)){return this.querySelectorAll(b);}else{if(!Object.isUndefined(Ext)){return new Ext.Element(this).query(b);}}}else{if(Object.isFunction(this.querySelectorAll)){return $A(this.querySelectorAll(b));}else{if(!Object.isUndefined(Ext)){return $A(new Ext.Element(this).query(b));}}}},setStyle:function(a){if(Object.isString(a)){this.style.cssText+=";"+a;}else{for(property in a){this.style[property]=a[property];}}return this;},getStyle:function(a){if(a.indexOf("-")>-1){var b="";for(i=0,j=a.length;i<j;i++){if(a.charAt(i)=="-"){i++;b+=a.charAt(i).toUpperCase();}else{b+=a.charAt(i);}}return this.style[b];}else{return this.style[a];}}});Object.extend(Function.prototype,{bind:function(){if(arguments.length<2&&typeof arguments[0]=="undefined"){return this;}var c=this,b=$A(arguments),a=b.shift();return function(){return c.apply(a,b.concat($A(arguments)));};},curry:function(){if(!arguments.length){return this;}var a=this,b=$A(arguments);return function(){return a.apply(this,b.concat($A(arguments)));};},intercept:function(){if(arguments.length<1&&typeof arguments[0]!="function"){return;}var c=this,a=$A(arguments),b=a.shift();return function(){b.apply(this,a.concat($A(arguments)));return c.apply(this,a.concat($A(arguments)));};},join:function(){if(arguments.length<1&&typeof arguments[0]!="function"){return;}var c=this,a=$A(arguments),b=a.shift();return function(){c.apply(this,a.concat($A(arguments)));return b.apply(this,a.concat($A(arguments)));};},sequencedJoin:function(){if(arguments.length<1&&typeof arguments[0]!="function"){return;}var c=this,a=$A(arguments),b=a.shift();return function(){var d=c.apply(this,a.concat($A(arguments)));if(Object.isAssocArray(d)&&Object.isDefined(d.args)){return b.apply(this,d.args);}return b.call(this,d);};},defer:function(){var e=this,d=$A(arguments),c=d.shift(),b=d.shift(),a=d.shift();if(!Object.isArray(a)){a=[a];}window.setTimeout(function(){e.apply(b,a);},c);},delay:function(){arguments[0]=arguments[0]*1000;this.defer.apply(this,arguments);}});Object.extend(Math,{roundToNearest:function(a,b){return Math.round(a/b)*b;}});Object.extend(String.prototype,{nl2br:function(){return this.replace(/[\r\n\f]/g,"<br />");},trim:function(){var c=this.replace(/^\s\s*/,""),a=/\s/,b=c.length;while(a.test(c.charAt(--b))){}return c.slice(0,b+1);},toQueryParams:function(b){var a=this.trim().match(/([^?#]*)(#.*)?$/);if(!a){return{};}return a[1].split(b||"&").inject({},function(e,f){if((f=f.split("="))[0]){var c=decodeURIComponent(f.shift());var d=f.length>1?f.join("="):f[0];if(!Object.isUndefined(d)){d=decodeURIComponent(d);}if(c in e){if(!Object.isArray(e[c])){e[c]=[e[c]];}e[c].push(d);}else{e[c]=d;}}return e;});},ellipse:function(a){if(this.length>a){return this.substr(0,a-3)+"...";}return this;}});Object.extend(Number.prototype,{toRad:function(){return this*Math.PI/180;},toDeg:function(){return this*180/Math.PI;},toBrng:function(){return(this.toDeg()+360)%360;}});$=function(a){if(Object.isElement(a)){return a;}return document.getElementById(a);};$A=function(c){if(!c){return[];}if(!(typeof c=="function"&&c=="[object NodeList]")&&c.toArray){return c.toArray();}var b=c.length||0,a=new Array(b);while(b--){a[b]=c[b];}return a;};var $PWT={version:"1.1.0",emptyFunction:function(){},init:function(){if(Object.isDefined(Ext)&&Object.isDefined(Function.prototype.createDelegate)){Ext.ListView.Sorter.prototype.initEvents=function(a){a.mon(a.innerHd,"click",this.onHdClick,this);a.innerHd.setStyle("cursor","pointer");a.mon(a.store,"datachanged",this.updateSortState,this);this.updateSortState.defer(10,this,a.store);};}delete this.init;},namespace:(function(){var b=/^(?:[\$a-zA-Z_]\w*[.])*[\$a-zA-Z_]\w*$/;function a(e,f){var d,h;if(Object.isString(e)){var c,g;if(!b.test(e)){throw new Error('"'+e+'" is not a valid name for a package.');}c=f;g=e.split(".");for(d=0,h=g.length;d<h;d++){e=g[d];c[e]=c[e]||{};c=c[e];}return c;}else{throw new TypeError();}}return function(c,d){return a(c,d||window);};})(),usingPackage:function(){var a=arguments;return function(b){return b.apply(a[0],a);};},Class:{create:function(a){if(typeof a=="string"){var c=window;var b=a;}else{if(Object.isUndefined(a.$name)){throw Error("Class name must be defined.");}else{var b=a.$name;if(Object.isUndefined(a.$namespace)){var c=window;}else{var c=$PWT.namespace(a.$namespace);}}}c[b]=function(){if(a.$abstract){throw'"'+b+'" is an abstract class and cannot be directly initiated.';}var h=Object.clone(c[b].prototype);var g=$A(arguments);if(Object.isDefined(c[b].prototype.__behaviors)&&c[b].prototype.__behaviors.length){for(var k=0,f=c[b].prototype.__behaviors.length;k<f;k++){var d=g.shift();c[b].prototype.__behaviors[k].call(this,d);}}c[b].prototype=h;var e=function(l,j){var i=function(r,p,s,t){var q=r[p].$parent;r[p].$parent=(function(u,v){return function(){if(!Object.isUndefined(t.definition.$extends)){var x=t.definition.$extends,y=false;while(1){if(Object.isFunction(x.prototype[p])&&u[p]!==x.prototype[p]){y=true;var w=i(u,p,v,x);break;}else{if(!Object.isUndefined(x.definition.$extends)){x=x.definition.$extends;}else{break;}}}}if(!y){var w=v.apply(u,arguments);}return w;};})(r,t.prototype[p]);var o=s.apply(r,arguments);r[p].$parent=q;return o;};var n=function(p,o,r){var q=p[o];p[o]=function(){p[o].$parent=(function(s,t){return function(){if(!Object.isUndefined(r.definition.$extends)){var v=r.definition.$extends,w=false;while(1){if(Object.isFunction(v.prototype[o])&&s[o]!==v.prototype[o]){w=true;var u=i(s,o,t,v);break;}else{if(!Object.isUndefined(v.definition.$extends)){v=v.definition.$extends;}else{break;}}}}if(!w){var u=t.apply(s,arguments);}return u;};})(p,r.prototype[o]);return q.apply(p,arguments);};};if(!Object.isUndefined(j.$extends)){for(object in j.$extends.prototype){if(Object.isFunction(l[object])&&Object.isFunction(j.$extends.prototype[object])&&l[object]!==j.$extends.prototype[object]){n(l,object,j.$extends);}else{if(Object.isFunction(l[object])){var m=j.$extends;while(1){if(Object.isFunction(m.prototype[object])&&l[object]!==m.prototype[object]){n(l,object,m);break;}else{if(!Object.isUndefined(m.definition.$extends)){m=m.definition.$extends;}else{break;}}}}}}}};if(Object.isDefined(c[b].definition)&&Object.isDefined(c[b].definition.$extends)){e(this,c[b].definition);}delete e;if(Object.isFunction(this.init)){this.init.apply(this,g);}};return function(d){if(typeof a.$extends!="undefined"){if(a.$extends==undefined){throw new Error("Unable to extend class. Class to extend from is undefined.");}else{if(typeof a.$extends.prototype.interfaceName!="undefined"){throw new Error("Unable to extend class from interface. Use $implements followed by interface.");}else{if(typeof a.$extends.prototype.traitName!="undefined"){throw new Error("Unable to extend class from trait. Use $traits followed by trat.");}else{if(typeof a.$extends.prototype.className=="undefined"){throw new Error('Unable to extend class. Class to extend from is not an instance of "$PWT.Class".');}else{c[b].prototype=Object.extend(c[b].prototype,a.$extends.prototype);}}}}}var h=false;if(!Object.isArray(c[b].prototype.__behaviors)){c[b].prototype.__behaviors=[];}if(!Object.isUndefined(a.$traits)){if(!Object.isArray(a.$traits)){a.$traits=[a.$traits];}h=$PWT.Trait.normalize(a.$traits);for(var g=0,e=a.$traits.length;g<e;g++){if(Object.isFunction(a.$traits[g])&&Object.isFunction(a.$traits[g].prototype.init)){c[b].prototype.__behaviors.push(a.$traits[g].prototype.init);}}if(!Object.isArray(a.$traits)){a.$traits=[a.$traits];}}if(!Object.isUndefined(a.$implements)){if(!Object.isArray(a.$implements)){a.$implements=[a.$implements];}for(var g=0,e=a.$implements.length;g<e;g++){if($PWT.Interface.validate(a.$implements[g])){$PWT.Interface.add(c[b],d,h,a.$implements[g]);}}}if(!Object.isUndefined(a.$traits)){if($PWT.Trait.validate(h)){$PWT.Trait.add(c[b],h);}}delete h;c[b].prototype.className=b;for(var k in d){if(Object.isFunction(d[k])){if(d[k]===$PWT.Class.ABSTRACT_METHOD){if(!a.$abstract){throw'"'+b+'" contains one or more abstract methods and must be declared as abstract.';}else{c[b].prototype[k]=Object.clone(d[k]);}}if(Object.isFunction(c[b].prototype[k])){var f=c[b].prototype[k];c[b].prototype[k]=d[k];c[b].prototype[k].$parent=f;}else{if(Object.isAssocArray(d[k])){c[b].prototype[k]=Object.clone(d[k]);}else{c[b].prototype[k]=d[k];}}}else{if(Object.isAssocArray(d[k])){c[b].prototype[k]=Object.clone(d[k]);}else{c[b].prototype[k]=d[k];}}}for(k in c[b].prototype){if(Object.isFunction(c[b].prototype[k])&&c[b].prototype[k]===$PWT.Class.ABSTRACT_METHOD&&!a.$abstract){throw ['"'+k+'" is an abstract method and so must either be defined or the class ',' "'+b+'" must be declared as abstract by defining'," $abstract:true in the class definition."].join("");}}c[b].definition=a;};},ABSTRACT_METHOD:function(){}},Interface:{create:function(a){if(Object.isString(a)){var b=window;var c=a;}else{if(Object.isUndefined(a.$name)){throw Error("Interface name must be defined.");}else{var c=a.$name;if(Object.isUndefined(a.$namespace)){var b=window;}else{var b=$PWT.namespace(a.$namespace);}}}b[c]=function(){throw ['Interface "'+c+'" cannot be initiated because interfaces'," are abstract classes which cannot be directly initiated."].join("");};b[c].prototype.interfaceName=c;return function(d){if(!Object.isUndefined(a.$extends)){if(!Object.isUndefined(a.$extends.prototype.traitName)){throw new Error("Interfaces cannot extend Traits.");}else{if(!Object.isUndefined(a.$extends.prototype.className)){throw new Error("Interfaces cannot extend Classes.");}else{b[c].prototype=Object.extend(b[c].prototype,a.$extends.prototype);}}}if(!Object.isUndefined(a.$implements)){throw new Error("Interfaces cannot implement other Interfaces. Interfaces can only extend other Interfaces.");}for(var e in d){if(Object.isFunction(d[e])&&d[e]!=$PWT.Interface.METHOD){throw new Error("Interfaces may only contain empty functions. Use $PWT.Interface.METHOD.");}else{b[c].prototype[e]=d[e];}}};},PROPERTY:function(){},METHOD:function(){},validate:function(a){if(Object.isUndefined(a)){throw new Error("Unable to implement interface. Interface to implement is undefined.");}else{if(!Object.isUndefined(a.prototype.className)){throw new Error(['Unable to implement interface. Interface to implement is a "$PWT.Class".',' An interface must be a "$PWT.Interface".']);}else{if(!Object.isUndefined(a.prototype.traitName)){throw new Error(['Unable to implement interface. Interface to implement is a "$PWT.Trait".',' An interface must be a "$PWT.Interface".']);}else{if(Object.isUndefined(a.prototype.interfaceName)){throw new Error('Unable to implement interface. Interface to implement is not an instance of "$PWT.Interface".');}}}}return true;},add:function(b,a,c,e){for(var d in e.prototype){if(d!="interfaceName"){if(e.prototype[d]==$PWT.Interface.METHOD){if(!Object.isFunction(a[d])&&!(c&&Object.isFunction(c.prototype[d]))){throw new Error(['The implementation of interface "'+e.prototype.interfaceName+'" requires',' the method "'+d+'" be implemented.'].join(""));}}if(Object.isAssocArray(e.prototype[d])){b.prototype[d]=Object.clone(e.prototype[d]);}else{b.prototype[d]=e.prototype[d];}}}}},Trait:{create:function(a){if(typeof a=="string"){var b=window;var c=a;}else{if(typeof a.$name=="undefined"){throw Error("Trait name must be defined.");}else{var c=a.$name;if(typeof a.$namespace=="undefined"){var b=window;}else{var b=$PWT.namespace(a.$namespace);}}}b[c]=function(){throw ['Trait "'+c+'" cannot be initiated because traits'," are abstract classes which cannot be directly initiated."].join("");};b[c].prototype.traitName=c;return function(g){var f=false;if(!Object.isUndefined(a.$traits)){if(!Object.isArray(a.$traits)){a.$traits=[a.$traits];}f=$PWT.Trait.normalize(a.$traits,true);}if(!Object.isUndefined(a.$implements)){if(!Object.isArray(a.$implements)){a.$implements=[a.$implements];}for(var e=0,d=a.$implements.length;e<d;e++){if($PWT.Interface.validate(a.$implements[e])){$PWT.Interface.add(b[c],g,f,a.$implements[e]);}}}if(!Object.isUndefined(a.$traits)){if($PWT.Trait.validate(f)){$PWT.Trait.add(b[c],f);}}delete f;for(var h in g){if(typeof g[h]!="function"){throw new Error("A trait may only contain methods.");}else{b[c].prototype[h]=g[h];}}};},normalize:function(h,b){if(!Object.isArray(h)){h=[h];}var g={};if(!Object.isFunction(h[h.length-1])){g=h[h.length-1];delete h[h.length-1];}var f=function(){};f.prototype.traitName="Normalized";var c=[];var k=[];for(var e=0,d=h.length;e<d;e++){if(Object.isFunction(h[e])){for(var a in h[e].prototype){if(!Object.isFunction(h[e].prototype[a])){continue;}if(a=="init"&&!b){continue;}if(!c.inArray(a)){c.push(a);f.prototype[a]=h[e].prototype[a];}else{if(!k.inArray(a)){if(Object.isUndefined(g[a])){delete f.prototype[a];}else{f.prototype[a]=g[a].prototype[a];}k.push(a);}}}}}return f;},validate:function(a){if(Object.isUndefined(a)){throw new Error("Unable to add trait. Trait to add is undefined.");}else{if(!Object.isUndefined(a.prototype.className)){throw new Error(['Unable to add trait. Trait to add is an instance of "$PWT.Class".',' A trait must be an instance of "$PWT.Trait".']);}else{if(!Object.isUndefined(a.prototype.instanceName)){throw new Error(['Unable to add trait. Trait to add is an instance of "$PWT.Interface".',' A trait must be an instance of "$PWT.Trait".']);}else{if(Object.isUndefined(a.prototype.traitName)){throw new Error('Unable to add trait. Trait to add is not an instance of "$PWT.Trait".');}}}}return true;},add:function(a,c){for(var b in c.prototype){if(b!="traitName"){if(!Object.isFunction(c.prototype[b])){throw new Error(["Attempt to add trait to class instance failed because trait contained an entity that was not a method."," Traits may only contain methods."].join(""));}a.prototype[b]=c.prototype[b];}}}},onReady:function(b){var a=setInterval(function(){if(/loaded|complete/.test(document.readyState)){clearInterval(a);if(Object.isFunction(b)){b();}}},10);},util:{include:function(c,d,f){var b=false;if(d=="js"){$A(document.getElementsByTagName("script")).each(function(g){if(g.src.replace("app:/","")==c){b=true;if(Object.isFunction(f)){f();}throw $break;}});if(!b){var a=document.createElement("script");a.type="text/javascript";a.src=c;a.onload=function(){if(Object.isFunction(f)){f();}};document.getElementsByTagName("head")[0].appendChild(a);}}else{if(d=="css"){$A(document.getElementsByTagName("link")).each(function(g){if(g.href.replace("app:/","")==c){b=true;if(Object.isFunction(f)){f();}throw $break;}});if(!b){var e=document.createElement("link");e.rel="stylesheet";e.type="text/css";e.href=c;e.onload=function(){if(Object.isFunction(f)){f();}};document.getElementsByTagName("head")[0].appendChild(e);}}}},random:function(inOptions){var options={min:10,max:20,chars:[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"]};Object.extend(options,inOptions);if(Object.isString(options.chars)){options.chars=$A(options.chars);}else{if(Object.isNumber(options.chars)){eval('options.chars="'+options.chars+'"');options.chars=$A(options.chars);}}var numChars=0;while(numChars<options.min){numChars=Math.round(Math.random()*options.max);}var $return="";for(var i=0;i<numChars;i++){$return+=options.chars[Math.round(Math.random()*options.chars.length)];}return $return;},__nextID:0,id:function(){this.__nextID++;return"PWT-"+this.__nextID;}}};$PWT.Class.create({$namespace:"$PWT",$name:"GC"})({object:function(b){if(Object.isDefined(b)){if(Object.isArray(b)){for(var c=0,a=b.length;c<a;c++){if(Object.isArray(b[c])||Object.isAssocArray(b[c])){$PWT.GC.object(b[c]);}delete b[c];}}else{if(Object.isAssocArray(b)){for(var d in b){if(Object.isArray(b[d])||Object.isAssocArray(b[d])){$PWT.GC.object(b[d]);}delete b[d];}}}delete b;}}});$PWT.GC=new $PWT.GC();$PWT.Class.create({$namespace:"$PWT",$name:"When"})({timer:null,items:{length:0},init:function(){this.startTimer();},startTimer:function(){if(Object.isNull(this.timer)){this.timer=window.setInterval(function(){for(var a in this.items){if(a=="length"){continue;}try{this[this.items[a].condition](this.items[a]);}catch(b){this.removeItem(this.items[a].id);throw b;}}}.bind(this),100);}},stopTimer:function(){window.clearInterval(this.timer);this.timer=null;},captureCondition:function(c,b,a){var a=$A(a);if(a.length){this.items[b].condition=c;this.items[b].callback=a.shift();this.items[b].args=a;}else{delete this.removeItem(b);}},addItem:function(b,a){var c=$PWT.util.random();this.items[c]={id:c,scope:b,object:a,condition:null,callback:$PWT.emptyFunction,args:null};this.items.length++;if(this.items.length){this.startTimer();}return c;},removeItem:function(a){delete this.items[a];this.items.length--;if(!this.items.length){this.stopTimer();}},assert:function(a,b){if(a){b.callback.apply(b.callback,b.args);this.removeItem(b.id);}},isDefined:function(a){this.assert(Object.isDefined(a.scope[a.object]),a);},isUndefined:function(a){this.assert(Object.isUndefined(a.scope[a.object]),a);},isTrue:function(a){this.assert((a.scope[a.object]===true),a);},isFalse:function(a){this.assert((a.scope[a.object]===false),a);},isBoolean:function(a){this.assert(Object.isBoolean(a.scope[a.object]),a);},isFunction:function(a){this.assert(Object.isFunction(a.scope[a.object]),a);},isArray:function(a){this.assert(Object.isArray(a.scope[a.object]),a);},isAssocArray:function(a){this.assert(Object.isAssocArray(a.scope[a.object]),a);},isString:function(a){this.assert(Object.isString(a.scope[a.object]),a);},isNumber:function(a){this.assert(Object.isNumber(a.scope[a.object]),a);},isElement:function(a){this.assert(Object.isElement(a.scope[a.object]),a);},isNull:function(a){this.assert(Object.isNull(a.scope[a.object]),a);},isEqualTo:function(a){this.assert((a.scope[a.object.object]==a.object.value),a);}});$PWT.When=new $PWT.When();$PWT.when=function(d,a){var e=$PWT.When.addItem(d,a),c=arguments.callee,b={andWhen:function(){if(!arguments.length){return c(d,a);}else{return c(arguments[0],arguments[1]);}}};return{isDefined:function(){$PWT.When.captureCondition("isDefined",e,arguments);return b;},isUndefined:function(){$PWT.When.captureCondition("isUndefined",e,arguments);return b;},isTrue:function(){$PWT.When.captureCondition("isTrue",e,arguments);return b;},isFalse:function(){$PWT.When.captureCondition("isFalse",e,arguments);return b;},isBoolean:function(){$PWT.When.captureCondition("isBoolean",e,arguments);return b;},isFunction:function(){$PWT.When.captureCondition("isFunction",e,arguments);return b;},isArray:function(){$PWT.When.captureCondition("isArray",e,arguments);return b;},isAssocArray:function(){$PWT.When.captureCondition("isAssocArray",e,arguments);return b;},isString:function(){$PWT.When.captureCondition("isString",e,arguments);return b;},isNumber:function(){$PWT.When.captureCondition("isNumber",e,arguments);return b;},isElement:function(){$PWT.When.captureCondition("isElement",e,arguments);return b;},isNull:function(){$PWT.When.captureCondition("isNull",e,arguments);return b;},isEqualTo:function(){$PWT.When.captureCondition("isEqualTo",e,arguments);return b;}};};$PWT.Interface.create({$namespace:"$PWT.iface",$name:"Configurable"})({config:{}});$PWT.Interface.create({$namespace:"$PWT.iface",$name:"Observable"})({events:[],observe:$PWT.Interface.METHOD,unobserve:$PWT.Interface.METHOD,fireEvent:$PWT.Interface.METHOD});$PWT.Trait.create({$namespace:"$PWT.trait",$name:"Configurable",$implements:$PWT.iface.Configurable})({init:function(a){Object.extend(this.config,a);}});$PWT.Trait.create({$namespace:"$PWT.trait",$name:"Observable",$implements:$PWT.iface.Observable})({init:function(a){for(var b in a){this.observe(b,a[b]);}},observe:function(a,b){if(!Object.isArray(this.events[a])){this.events[a]=[];}this.events[a].push(b);this.events[a].last().times=0;return this;},observeOnce:function(a,b){return this.observeTimes.call(this,1,a,b);},observeTimes:function(a,b,c){if(!Object.isArray(this.events[b])){this.events[b]=[];}c.times=a;this.events[b].push(c);return this;},unobserve:function(d,e){if(!Object.isUndefined(this.events[d])){var c=[];for(var b=0,a=this.events[d].length;b<a;b++){if(this.events[d][b]==e){delete this.events[d][b];}else{c.push(this.events[d][b]);}}this.events[d]=c;if(!this.events[d].length){this.events[d]=true;}}return this;},fireEvent:function(){var b=$A(arguments),d=b.shift();if(!Object.isUndefined(this.events[d])&&Object.isArray(this.events[d])){for(var c=0,a=this.events[d].length;c<a;c++){if(Object.isFunction(this.events[d][c])){if(this.events[d][c].apply(this,b)===false){return false;}if(Object.isDefined(this.events[d][c])&&this.events[d][c].times!==0){if(--this.events[d][c].times===0){this.unobserve(d,this.events[d][c]);}}}}}return true;},clearEvent:function(a){if(!Object.isUndefined(this.events[a])){this.events[a]=true;}return this;}});$PWT.Trait.create({$namespace:"$PWT.trait",$name:"Timeable",$traits:$PWT.trait.Observable})({startTimer:function(){if(this.config.timeout){this.timeout=this.config.timeout;window.clearInterval(this.timer);this.timer=window.setInterval(function(){this.timeout--;if(this.timeout<=0){window.clearInterval(this.timer);this.fireEvent("onTimeout",this);}}.bind(this),1000);}},restartTimer:function(){this.startTimer();},pauseTimer:function(){window.clearInterval(this.timer);},resumeTimer:function(){this.startTimer();},stopTimer:function(){window.clearInterval(this.timer);this.timeout=this.config.timeout;},resetTimer:function(){this.timeout=this.config.timeout;}});$PWT.Class.create({$namespace:"$PWT.mvc",$name:"Model",$traits:[$PWT.trait.Configurable,$PWT.trait.Observable]})({config:{root:null,shellView:"shell",shellListeners:{},path:{view:null,controller:null,script:null,template:null,}},events:{onBeforeInit:true,onAfterInit:true,onNewView:true,onNewController:true,onRunScript:true},views:{},controllers:{},shell:null,init:function(a){this.fireEvent("onBeforeInit",this);if(this.config.shellView!=null){$PWT.util.include(this.config.path.view+this.config.shellView+".js","js",function(){this.shell=new window[this.config.root].view[this.config.shellView](this.config.shellListeners,this);this.fireEvent("onAfterInit",this);}.bind(this));}else{throw"shellView not defined in system init call. Unable to display initial screen!";}return this;},newView:function(d,c,a){var b=function(){this.views[d]=new window[this.config.root].view[c](a,this);this.fireEvent("onNewView",this,this.views[d]);}.bind(this);if(Object.isUndefined(window[this.config.root].view)||Object.isUndefined(window[this.config.root].view[c])){$PWT.util.include(this.config.path.view+c+".js","js",b);}else{b();}},getView:function(a){return this.views[a];},newController:function(c,d,a,b){var e=function(){this.controllers[c]=new window[this.config.root].controller[d](b,this,a);this.fireEvent("onNewController",this,this.controllers[c]);}.bind(this);if(Object.isUndefined(window[this.config.root].controller)||Object.isUndefined(window[this.config.root].controller[d])){$PWT.util.include(this.config.path.controller+d+".js","js",e);}else{e();}},getController:function(a){return this.controllers[a];},runScript:function(b,c){var a=function(){var d=new window[this.config.root].script[b]();this.fireEvent("onRunScript",this,d);if(Object.isFunction(c)){c(d);}}.bind(this);if(Object.isUndefined(window[this.config.root].script)||Object.isUndefined(window[this.config.root].script[b])){$PWT.util.include(this.config.path.script+b+".js","js",a);}else{a();}},getShell:function(){return this.shell;}});$PWT.Class.create({$namespace:"$PWT.mvc",$name:"View",$traits:$PWT.trait.Observable})({events:{onBeforeInit:true,onAfterInit:true,onAttachController:true},model:null,controller:null,init:function(a){this.model=a;if(Object.isFunction(this.initView)){this.fireEvent("onBeforeInit",this);this.initView();}if(Object.isString(this.controller)||Object.isAssocArray(this.controller)){if(Object.isString(this.controller)){this.attachController(this.controller,this.controller);}else{if(Object.isUndefined(this.controller.id)){throw"Undefined controller ID!";}else{this.attachController(this.controller.id,(!Object.isUndefined(this.controller.name))?this.controller.name:this.controller.id,(!Object.isUndefined(this.controller.listeners))?this.controller.listeners:{});}}}this.fireEvent("onAfterInit",this);},getModel:function(){return this.model;},getController:function(){return this.controller;},attachController:function(b,c,a){a=Object.clone(a);this.fireEvent("onAttachController",this,b,c,a);a=Object.extend(a,{onAfterInit:function(d){this.controller=d;this.fireEvent("onAfterAttachController",this,this.controller);}.bind(this)});this.model.newController(b,c,this,a);},});$PWT.Class.create({$namespace:"$PWT.mvc",$name:"Controller",$traits:$PWT.trait.Observable})({events:{onBeforeInit:true,onAfterInit:true},model:null,view:null,init:function(b,a){this.model=b;this.view=a;this.fireEvent("onBeforeInit",this);this.initController();this.fireEvent("onAfterInit",this);},getModel:function(){return this.model;},getView:function(){return this.view;}});$PWT.Class.create({$namespace:"$PWT.com",$name:"Request",$traits:[$PWT.trait.Configurable,$PWT.trait.Timeable]})({events:{onSuccess:true,onFailure:true,onProgress:true,onComplete:true,onError:true,onAbort:true,onTimeout:true,onEvalError:true},config:{url:"",method:"POST",parameters:null,async:true,xDomain:false,timeout:300,evalScript:false,evalJSON:true,evalQueryString:false,headers:{"X-Requested-With":"XMLHttpRequest","X-PWT-Version":$PWT.version,Accept:"application/json, text/javascript, text/html, application/xml, text/xml, */*","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Cache-Control":"no-cache"}},xhr:null,response:{responseText:null,responseXML:null,responseJSON:null,responseQueryString:null},init:function(){this.observe("onTimeout",function(){this.stop();}.bind(this));this.xhr=new XMLHttpRequest();if(Object.isAssocArray(this.config.parameters)){this.config.parameters=Object.toQueryString(this.config.parameters);}else{this.config.parameters="";}if(this.config.method==$PWT.com.Request.METHOD.GET){if(this.config.parameters!=""){if(!/\?/.test(this.config.url)){this.config.url+="?";}this.config.url+=this.config.parameters;}this.xhr.open(this.config.method,this.config.url,this.config.async);}else{this.xhr.open(this.config.method,this.config.url,this.config.async);}for(header in this.config.headers){this.xhr.setRequestHeader(header,this.config.headers[header]);}this.xhr.onreadystatechange=this.onReadyStateChange.bind(this);this.xhr.onabort=function(a){this.stopTimer();this.fireEvent("onAbort",a,this);}.bind(this);this.xhr.onerror=function(a){this.stopTimer();this.fireEvent("onFailure",this.xhr);this.fireEvent("onError",a,this);}.bind(this);this.startTimer();this.xhr.send(this.config.parameters);},onReadyStateChange:function(xhrEvent){switch(this.xhr.readyState){case $PWT.com.Request.READYSTATE.UNINITIALIZED:case $PWT.com.Request.READYSTATE.LOADING:case $PWT.com.Request.READYSTATE.LOADED:case $PWT.com.Request.READYSTATE.INTERACTIVE:this.fireEvent("onProgress",this,xhrEvent);break;case $PWT.com.Request.READYSTATE.COMPLETE:this.stopTimer();this.fireEvent("onComplete",this,xhrEvent);if(this.xhr.status==$PWT.com.Request.STATUS.OK){this.response={responseText:this.xhr.responseText,responseXML:this.xhr.responseXML};if(this.xhr.getResponseHeader("Content-Type")=="application/json"&&this.config.evalJSON){eval("this.response.responseJSON="+this.xhr.responseText+";");}if(this.config.evalQueryString){this.response.responseQueryString=this.xhr.responseText.toQueryParams();}this.fireEvent("onSuccess",this.response,xhrEvent);}else{this.fireEvent("onFailure",this.xhr);}break;}return;},stop:function(){this.xhr.abort();this.stopTimer();return this.xhr;}});Object.extend($PWT.com.Request,{READYSTATE:{UNINITIALIZED:0,LOADING:1,LOADED:2,INTERACTIVE:3,COMPLETE:4},STATUS:{UNINITILIZED:0,OK:200,NOT_FOUND:404,SERVER_ERROR:500},METHOD:{POST:"POST",GET:"GET",PUT:"PUT",DELETE:"DELETE",HEAD:"HEAD",OPTIONS:"OPTIONS"}});$PWT.namespace("$PWT.crypt");$PWT.usingPackage($PWT.crypt)(function(a){a.base64={keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(d){var b="";var l,j,g;var k,h,f,e;var c=0;do{l=d.charCodeAt(c++);j=d.charCodeAt(c++);g=d.charCodeAt(c++);k=l>>2;h=((l&3)<<4)|(j>>4);f=((j&15)<<2)|(g>>6);e=g&63;if(isNaN(j)){f=e=64;}else{if(isNaN(g)){e=64;}}b=b+this.keyStr.charAt(k)+this.keyStr.charAt(h)+this.keyStr.charAt(f)+this.keyStr.charAt(e);}while(c<d.length);return b;},decode:function(d){var b="";var l,j,g;var k,h,f,e;var c=0;d=d.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{k=this.keyStr.indexOf(d.charAt(c++));h=this.keyStr.indexOf(d.charAt(c++));f=this.keyStr.indexOf(d.charAt(c++));e=this.keyStr.indexOf(d.charAt(c++));l=(k<<2)|(h>>4);j=((h&15)<<4)|(f>>2);g=((f&3)<<6)|e;b=b+String.fromCharCode(l);if(f!=64){b=b+String.fromCharCode(j);}if(e!=64){b=b+String.fromCharCode(g);}}while(c<d.length);return b;}};});$PWT.Class.create({$namespace:"$PWT.chart",$name:"Chart",$traits:[$PWT.trait.Configurable,$PWT.trait.Observable]})({config:{renderTo:null,autoRender:true,swf:null,type:null,width:300,height:300,title:"",},events:{onReady:true,onLoad:true,onChange:true},types:[],swf:"",data:[],rendered:false,chartObject:null,chart:{type:null,width:null,height:null,title:""},init:function(){if(!this.types.inArray(this.config.type)){throw'Invalid type "'+this.config.type+'". This type is not supported.';}else{this.chart=Object.extend(this.chart,{type:this.config.type,width:this.config.width,height:this.config.height,title:this.config.title,});this.fireEvent("onReady",this);if(this.config.autoRender){this.render();}}},render:function(){this.rendered=true;this.fireEvent.defer(500,this,"onRender",this);},setTitle:function(a){this.chart.title=a;this.fireEvent("onTitleChange",this,a);return this;},setWidth:function(a){this.chart.width=a;if(this.rendered){this.chartObject.width=a;}this.fireEvent("onWidthChange",this,a);return this;},setHeight:function(a){this.chart.height=a;if(this.rendered){this.chartObject.height=a;}this.fireEvent("onHeightChange",this,a);return this;},setSize:function(b,a){if(Object.isAssocArray(b)){this.chart.width=b.width;this.chart.height=b.height;}else{this.chart.width=b;this.chart.height=a;}if(this.rendered){this.chartObject.width=this.chart.width;this.chartObject.height=this.chart.height;}this.fireEvent("onWidthChange",this,this.chart.width);this.fireEvent("onHeightChange",this,this.chart.height);return this;},getChart:function(){return this.chartObject;}});$PWT.Class.create({$namespace:"$PWT.chart",$name:"OFC",$extends:$PWT.chart.Chart})({config:{renderTo:null,autoRender:true,swf:null,type:null,width:300,height:300,title:"",titleStyle:null,legend:false,yLegendText:null,yLegendStyle:null,tooltip:null,x_axis:null,y_axis:null,y_axis_right:false},events:{onChange:true},types:["line","line_dot","line_hollow","bar","bar_filled","bar_glass","bar_3d","bar_sketch","hbar","bar_stack","hbar_stack","bar_round_glass","bar_cylinder","bar_cylinder_outline","bar_dome","bar_round","bar_round3d","bar_plastic","bar_plastic_flat","area_line","area_hollow","pie","scatter","scatter_line","candle"],swf:"open-flash-chart.swf",_disableRefresh:false,init:function(){this.disableRefresh();this.chart=Object.extend(this.chart,{titleStyle:"color: #736AFF; font-size: 12px;",yLegendText:"",yLegendStyle:"color: #736AFF; font-size: 12px;",bgColor:"#FFFFFF",legend:null,tooltip:null,xAxis:null,yAxisLeft:null,yAxisRight:null,numDecimals:null,fixedNumDecimalsForced:null,decimalSeparatorComma:null,thousandSeparatorDisabled:null});if(Object.isAssocArray(this.config.title)&&Object.isDefined(this.config.title.text)){var a=Object.clone(this.config.title);this.config.title=a.text;if(Object.isDefined(a.style)){this.config.titleStyle=a.style;this.chart.titleStyle=a.style;}delete a;}else{if(!Object.isNull(this.config.titleStyle)){this.chart.titleStyle=this.config.titleStyle;}}if(Object.isAssocArray(this.config.y_legend)&&Object.isDefined(this.config.y_legend.text)){var a=Object.clone(this.config.y_legend);this.config.yLegendText=a.text;this.chart.yLegendText=a.text;if(Object.isDefined(a.style)){this.config.yLegendStyle=a.style;this.chart.yLegendStyle=a.style;}delete a;}else{if(!Object.isNull(this.config.yLegendText)){this.chart.yLegendText=this.config.yLegendText;if(!Object.isNull(this.config.yLegendStyle)){this.chart.yLegendStyle=this.config.yLegendStyle;}}}this.setTooltip(this.config.tooltip);this.setLegend(this.config.legend);this.setXAxis(this.config.x_axis);this.setLeftYAxis(this.config.y_axis);this.setRightYAxis(this.config.y_axis_right);this.enableRefresh();this.init.$parent();},onChange:function(){this.refresh();var a=$A(arguments);a.unshift("onChange");this.fireEvent.apply(this,a);},render:function(a){if(!this.rendered){if(!a&&this.config.renderTo){a=this.config.renderTo;}if(a){swfobject.embedSWF(this.config.swf||this.swf,a,this.chart.width,this.chart.height,"9.0.0",null,{loading:"Loading Chart..."});this.chartObject=$(a);this.refresh();}else{throw new Error("Unable to render. Nowhere to render to!");}this.render.$parent();}},load:function(a){$PWT.when(this.chartObject,"load").isFunction(function(){this.chartObject.load(Object.toJSON(a));this.fireEvent("onLoad",this,a);for(var c=0,b=this.data.length;c<b;c++){this.data[c].setAnimations(false);}}.bind(this));},reload:function(){$PWT.when(this.chartObject,"reload").isFunction(function(){this.chartObject.reload();}.bind(this));},refresh:function(){if(!this._disableRefresh){this.load(this.applyTemplate());}},applyTemplate:function(a){a=Object.extend(a,this.chart);var d=[];for(var c=0,b=this.data.length;c<b;c++){d.push(this.data[c].getRecordSet());}return{bg_colour:this.chart.bgColor,title:{text:this.chart.title,style:"{"+this.chart.titleStyle+"}"},y_legend:{text:this.chart.yLegendText,style:"{"+this.chart.yLegendStyle+"}"},elements:d,x_axis:this.chart.xAxis.getAxis(),y_axis:this.chart.yAxisLeft.getAxis(),y_axis_right:this.chart.yAxisRight.getAxis(),legend:this.chart.legend.getLegend(),tooltip:this.chart.tooltip.getTooltip(),num_decimals:this.chart.numDecimals,is_fixed_num_decimals_forced:this.chart.fixedNumDecimalsForced,is_decimal_separator_comma:this.chart.decimalSeparatorComma,is_thousand_separator_disabled:this.chart.thousandSeparatorDisabled};},loadData:function(d,a){if(!a){$PWT.GC.object(this.data);delete this.data;this.data=[];}if(Object.isArray(d)){for(var c=0,b=d.length;c<b;c++){if(Object.isDefined(d[c].className)&&d[c].className=="RecordSet"){d[c].observe("onChange",this.onChange.bind(this));this.data.push(d[c]);}else{if(Object.isUndefined(d[c].type)&&!Object.isNull(this.config.type)){d[c].type=this.config.type;}this.data.push(new $PWT.chart.OFC.RecordSet(d[c]));this.data.last().observe("onChange",this.onChange.bind(this));}}}else{if(Object.isDefined(d.className)&&d.className=="RecordSet"){d.observe("onChange",this.onChange.bind(this));this.data.push(d);}else{if(Object.isUndefined(d.type)&&!Object.isNull(this.config.type)){d.type=this.config.type;}this.data.push(new $PWT.chart.OFC.RecordSet(d));this.data.last().observe("onChange",this.onChange.bind(this));}}this.onChange(d,a);},getData:function(){return this.data;},getDataItem:function(a){return this.data[a];},setTitle:function(b,a){this.setTitle.$parent(b);if(a){this.setTitleStyle(a);}this.onChange(a);return this;},setTitleStyle:function(a){this.chart.titleStyle=a;this.onChange(a);return this;},setBGColor:function(a){this.chart.bgColor=a;this.onChange(a);return this;},setTooltip:function(a){$PWT.GC.object(this.chart.tooltip);delete this.chart.tooltip;if(Object.isAssocArray(a)){if(Object.isDefined(a.className)&&a.className=="Tooltip"){this.chart.tooltip=a;}else{this.chart.tooltip=new $PWT.chart.OFC.Tooltip(a);}}else{if(Object.isString(a)){this.chart.tooltip=new $PWT.chart.OFC.Tooltip({tip:a});}else{this.chart.tooltip=new $PWT.chart.OFC.Tooltip({disabled:!Boolean(a)});}}this.chart.tooltip.observe("onChange",this.onChange.bind(this));},getTooltip:function(){return this.chart.tooltip;},setLegend:function(a){$PWT.GC.object(this.chart.legend);delete this.chart.legend;if(Object.isAssocArray(a)){if(Object.isDefined(a.className)&&a.className=="Legend"){this.chart.legend=a;}else{this.chart.legend=new $PWT.chart.OFC.Legend(a);}}else{this.chart.legend=new $PWT.chart.OFC.Legend({disabled:!Boolean(a)});}this.chart.legend.observe("onChange",this.onChange.bind(this));},getLegend:function(){return this.chart.legend;},setXAxis:function(a){$PWT.GC.object(this.chart.xAxis);delete this.chart.xAxis;if(Object.isAssocArray(a)){if(Object.isDefined(a.className)&&a.className=="X"){this.chart.xAxis=a;}else{this.chart.xAxis=new $PWT.chart.OFC.Axis.X(a);}}else{this.chart.xAxis=new $PWT.chart.OFC.Axis.X();}this.chart.xAxis.observe("onChange",this.onChange.bind(this));},getXAxis:function(){return this.chart.xAxis;},setLeftYAxis:function(a){$PWT.GC.object(this.chart.yAxisLeft);delete this.chart.yAxisLeft;if(Object.isAssocArray(a)){if(Object.isDefined(a.className)&&a.className=="Y"){this.chart.yAxisLeft=a;}else{this.chart.yAxisLeft=new $PWT.chart.OFC.Axis.Y(a);}}else{this.chart.yAxisLeft=new $PWT.chart.OFC.Axis.Y();}this.chart.yAxisLeft.observe("onChange",this.onChange.bind(this));},getLeftYAxis:function(){return this.chart.yAxisLeft;},setRightYAxis:function(a){$PWT.GC.object(this.chart.yAxisRight);delete this.chart.yAxisRight;if(Object.isAssocArray(a)){if(Object.isDefined(a.className)&&a.className=="Y"){this.chart.yAxisRight=a;}else{this.chart.yAxisRight=new $PWT.chart.OFC.Axis.Y(a);}}else{this.chart.yAxisRight=new $PWT.chart.OFC.Axis.Y({disabled:!Boolean(a)});}this.chart.yAxisRight.observe("onChange",this.onChange.bind(this));},getRightYAxis:function(){return this.chart.yAxisRight;},setYLegendText:function(a){this.chart.yLegendText=a;this.onChange(a);return this;},getYLegendText:function(){return this.chart.yLegendText;},setYLegendStyle:function(a){this.chart.yLegendStyle=a;this.onChange(a);return this;},getYLegendStyle:function(){return this.chart.yLegendStyle;},setNumDecimals:function(a){this.chart.numDecimals=a;this.onChange(a);return this;},getNumDecimals:function(){return this.chart.numDecimals;},setFixedNumDecimalsForced:function(a){this.chart.fixedNumDecimalsForced=Boolean(a);this.onChange(a);return this;},getFixedNumDecimalsForced:function(){return this.chart.fixedNumDecimalsForced;},setDecimalSeparatorComma:function(a){this.chart.decimalSeparatorComma=Boolean(a);this.onChange(a);return this;},getDecimalSeparatorComma:function(){return this.chart.decimalSeparatorComma;},setThousandSeparatorDisabled:function(a){this.chart.thousandSeparatorDisabled=Boolean(a);this.onChange(a);return this;},getThousandSeparatorDisabled:function(){return this.chart.thousandSeparatorDisabled;},disableRefresh:function(){this._disableRefresh=true;},enableRefresh:function(){this._disableRefresh=false;},isRefreshEnabled:function(){return !this._disableRefresh;}});$PWT.Class.create({$namespace:"$PWT.chart.OFC",$name:"Axis",$traits:[$PWT.trait.Configurable,$PWT.trait.Observable]})({config:{colour:"#d000d0","grid-colour":"#00ff00",stroke:1,steps:1,min:0,max:null,labels:null},events:{onChange:true},init:function(){this.config.labels={labels:this.config.labels};},setColor:function(a){this.config.colour=a;return this;},getColor:function(){return this.colour;},setColour:function(){return this.setColor.apply(this,arguments);},getColour:function(){return this.getColor.apply(this,arguments);},setGridColor:function(a){this.config["grid-colour"]=a;return this;},getGridColor:function(){return this.config["grid-colour"];},setGridColour:function(){return this.setGridColor.apply(this,arguments);},getGridColour:function(){return this.getGridColour.apply(this,arguments);},setStroke:function(a){this.config.stroke=a;return this;},getStroke:function(){return this.config.stroke;},setMin:function(a){this.config.min=a;return this;},getMin:function(){return this.config.min;},setMax:function(a){this.config.max=a;return this;},getMax:function(){return this.config.max;},setLabels:function(a){this.config.labels={labels:a};return this;},getLabels:function(){return this.config.labels;},getAxis:function(){return this.config;}});$PWT.Class.create({$namespace:"$PWT.chart.OFC.Axis",$name:"X",$extends:$PWT.chart.OFC.Axis})({config:{colour:"#000000","grid-colour":"#CCCCCC","tick-height":10,stroke:1,steps:1,min:0,max:null,labels:null},setTickHeight:function(a){this.config["tick-height"]=a;return this;},getTickHeight:function(){return this.config["tick-height"];}});$PWT.Class.create({$namespace:"$PWT.chart.OFC.Axis",$name:"Y",$extends:$PWT.chart.OFC.Axis})({config:{rotate:"horizontal","tick-length":3,offset:0,"log-scale":0,colour:"#000000","grid-colour":"#CCCCCC",stroke:1,steps:1,min:0,max:10,labels:null,disabled:false},rotations:["horizontal","vertical"],setRotation:function(a){if(this.rotations.inArray(a)){this.config.rotation=a;}else{throw new Error('Invalid Y Axis text rotation "'+a+'". Valid rotations are: '+this.rotations.join(", ")+".");}return this;},getRotation:function(){return this.config.rotation;},setTickLength:function(a){this.config["tick-length"]=a;return this;},getTickLength:function(){return this.config["tick-length"];},setOffset:function(a){this.config.offset=a;return this;},getOffset:function(){return this.config.offset;},setLogScale:function(a){this.config["log-scale"]=a;return this;},getLogScale:function(){return this.config["log-scale"];},setDisabled:function(a){this.config.disabled=Boolean(a);return this;},getDisabled:function(){return this.config.disabled;},getAxis:function(){if(this.config.disabled){return null;}else{return this.getAxis.$parent();}}});$PWT.Class.create({$namespace:"$PWT.chart.OFC",$name:"Legend",$traits:[$PWT.trait.Configurable,$PWT.trait.Observable]})({config:{position:"right",border:true,stroke:1,shadow:true,border_colour:"#808080",bg_colour:"#F8F8F8",alpha:1,margin:10,padding:6,disabled:false},events:{onChange:true},positions:["top","right"],setPosition:function(a){if(this.position.inArray(a)){this.config.position=a;this.fireEvent("onChange",this,a);}else{throw new Error('Invalid legend position "'+a+'". Valid positions are: '+this.positions.join(", ")+".");}return this;},getPosition:function(){return this.config.position;},setBorder:function(a){this.config.border=Boolean(a);this.fireEvent("onChange",this,a);return this;},getBorder:function(){return this.config.border;},setStroke:function(a){this.config.stroke=a;this.fireEvent("onChange",this,a);return this;},getStroke:function(){return this.config.stroke;},setShadow:function(a){this.config.shadow=Boolean(a);this.fireEvent("onChange",this,a);return this;},getShadow:function(){return this.config.shadow;},setBorderColor:function(a){this.config.border_colour=a;this.fireEvent("onChange",this,a);return this;},getBorderColor:function(){return this.config.border_colour;},setBorderColour:function(){return this.setBorderColor.apply(this,arguments);},getBorderColour:function(){return this.getBorderColor.apply(this,arguments);},setBackgroundColor:function(a){this.config.bg_colour=a;this.fireEvent("onChange",this,a);return this;},getBackgroundColor:function(){return this.config.bg_colour;},setBackgroundColour:function(){return this.setBackgroundColor.apply(this,arguments);},getBackgroundColour:function(){return this.getBackgroundColor.apply(this,arguments);},setAlpha:function(a){this.config.alpha=a;this.fireEvent("onChange",this,a);return this;},getAlpha:function(){return this.config.alpha;},setMargin:function(a){this.config.margin=a;return this;},getMargin:function(){return this.config.margin;},setPadding:function(a){this.config.padding=a;this.fireEvent("onChange",this,a);return this;},getPadding:function(){return this.config.padding;},setDisabled:function(a){this.config.disabled=Boolean(a);this.fireEvent("onChange",this,a);return this;},getDisabled:function(){return this.config.disabled;},getLegend:function(){return(this.config.disabled)?null:this.config;}});$PWT.Class.create({$namespace:"$PWT.chart.OFC",$name:"Tooltip",$traits:[$PWT.trait.Configurable,$PWT.trait.Observable]})({config:{shadow:true,mouse:2,stroke:1,colour:"#000000",background:"#FFFFFF",title:"font-size: 14px; color: #0A0A2A;",body:"font-size: 10px; font-weight: bold; color: #000000;",tip:"#val#",disabled:false},events:{onChange:true,},init:function(){if(this.config.tip=="#val#"&&Object.isDefined(this.config.template)){this.config.tip=this.config.template;}else{if(this.config.tip==null){this.config.tip="#val#";}}},setShadow:function(a){this.config.shadow=a;this.fireEvent("onChange",this,a);return this;},getShadow:function(){return this.config.shadow;},setMouse:function(a){this.config.mouse=a;this.fireEvent("onChange",this,a);return this;},getMouse:function(){return this.config.mouse;},setStroke:function(a){this.config.stroke=a;this.fireEvent("onChange",this,a);return this;},getStroke:function(){return this.config.stroke;},setTextColor:function(a){this.config.colour=a;this.fireEvent("onChange",this,a);return this;},getTextColor:function(){return this.config.colour;},setTextColour:function(){return this.setTextColor.apply(this,arguments);},getTextColour:function(){return this.getTextColor.apply(this,arguments);},setBackgroundColor:function(a){this.config.background=a;this.fireEvent("onChange",this,a);return this;},getBackgroundColor:function(){return this.config.background;},setBackgroundColour:function(){return this.setBackgroundColor.apply(this,arguments);},getBackgroundColour:function(){return this.getBackgroundColor.apply(this,arguments);},setTitleStyle:function(a){this.config.title="{"+a+"}";this.fireEvent("onChange",this,a);return this;},getTitleStyle:function(){return this.config.title;},setBodyStyle:function(a){this.config.body="{"+a+"}";this.fireEvent("onChange",this,a);return this;},getBodyStyle:function(){return this.config.body;},setTemplate:function(a){this.config.tip=a;this.fireEvent("onChange",this,a);},getTemplate:function(){return this.config.tip;},setDisabled:function(a){this.config.disabled=Boolean(a);this.fireEvent("onChange",this,a);return this;},getDisabled:function(){return this.config.disabled;},getTooltip:function(){if(!this.config.disabled){var a=Object.clone(this.config);a.title="{"+a.title+"}";a.body="{"+a.body+"}";return a;}return null;}});$PWT.Class.create({$namespace:"$PWT.chart.OFC",$name:"RecordSet",$traits:[$PWT.trait.Configurable,$PWT.trait.Observable]})({types:[],config:{type:"line",alpha:0.5,colour:"#000000",text:"","font-size":10,animate:true,overlap:false,barwidth:0.9},events:{onChange:true},values:[],init:function(){this.types=$PWT.chart.OFC.prototype.types;if(Object.isDefined(this.config.values)){this.setValues(this.config.values);delete this.config.values;}},onChange:function(){var a=$A(arguments);a.unshift("onChange");this.fireEvent.apply(this,a);},setType:function(a){if(!this.types.inArray(a)){throw new Error('Invalid chart type "'+a+'".');}else{this.config.type=a;}return this;},getType:function(){return this.config.type;},setAlpha:function(a){this.config.alpha=a;this.fireEvent("onChange",this,a);return this;},getAlpha:function(){return this.config.alpha;},setColor:function(a){this.config.colour=a;this.fireEvent("onChange",this,a);return this;},getColor:function(){return this.colour;},setColour:function(){return this.setColor.apply(this,arguments);},getColour:function(){return this.getColor.apply(this,arguments);},setText:function(a){this.config.text=a;this.fireEvent("onChange",this,a);return this;},getText:function(){return this.text;},setFontSize:function(a){this.config["font-size"]=a;this.fireEvent("onChange",this,a);return this;},getFontSize:function(){return this.config["font-size"];},setValues:function(b,a){if(!a){$PWT.GC.object(this.values);delete this.values;this.values=[];}if(Object.isArray(b)){for(var d=0,c=b.length;d<c;d++){if(Object.isAssocArray(b[d])){if(Object.isDefined(b[d].className)&&b[d].className=="Record"){this.values.push(b[d]);b[d].observe("onChange",this.onChange.bind(this));}else{this.values.push(new $PWT.chart.OFC.Record(b[d]));this.values.last().observe("onChange",this.onChange.bind(this));}}else{this.values.push(new $PWT.chart.OFC.Record({top:b[d]}));this.values.last().observe("onChange",this.onChange.bind(this));}}}else{if(Object.isAssocArray(b)&&Object.isDefined(b.className)&&b.className=="Record"){this.values.push(b);b.observe("onChange",this.onChange.bind(this));}else{this.values.push(new $PWT.chart.OFC.Record({top:b}));this.values.last().observe("onChange",this.onChange.bind(this));}}this.onChange();return this;},getValues:function(){return this.values;},getRecordSet:function(){var b=Object.clone(this.config);b.values=[];for(var c=0,a=this.values.length;c<a;c++){b.values.push(this.values[c].getRecord());}return b;},setAnimations:function(a){this.config.animate=Boolean(a);return this;},getAnimations:function(){return this.config.animate;},setOverlap:function(a){this.config.overlap=a;this.fireEvent("onChange",this,a);return this;},getOverlap:function(){return this.config.overlap;},setBarwidth:function(a){this.config.barwidth=a;this.fireEvent("onChange",this,a);return this;},getBarwidth:function(){return this.config.barwidth;}});$PWT.Class.create({$namespace:"$PWT.chart.OFC",$name:"Record",$traits:[$PWT.trait.Configurable,$PWT.trait.Observable]})({config:{top:null,colour:null,tip:null},events:{onChange:true},init:function(){if(Object.isNull(this.config.top)&&Object.isDefined(this.config.value)){this.config.top=this.config.value;}this.setTip(this.config.tip);},onChange:function(){var a=$A(arguments);a.unshift("onChange");this.fireEvent.apply(this,a);},setValue:function(a){this.config.top=a;this.fireEvent("onChange",this,a);return this;},getValue:function(){return this.config.top;},setColor:function(a){this.config.colour=a;this.fireEvent("onChange",this,a);return this;},getColor:function(){return this.colour;},setColour:function(){return this.setColor.apply(this,arguments);},getColour:function(){return this.getColor.apply(this,arguments);},setTip:function(a){$PWT.GC.object(this.config.tip);delete this.config.tip;if(Object.isAssocArray(a)){if(Object.isDefined(a.className)&&a.className=="Tooltip"){this.config.tip=a;}else{this.config.tip=new $PWT.chart.OFC.Tooltip(a);}}else{this.config.tip=new $PWT.chart.OFC.Tooltip({tip:a});}this.config.tip.observe("onChange",this.onChange.bind(this));return this;},getTip:function(){return this.tip;},getRecord:function(){if(Object.isNull(this.config.colour)&&this.config.tip.getTemplate()=="#val#"){return this.config.top;}else{var a=Object.clone(this.config);a.tip=a.tip.getTemplate();return a;}}});